# The use of this pipeline to create the sql databases for the multiple firms in an existing SQL Server  and SQL Server Elastic pool. 
parameters:
  sqlservername: ''
  sqlelasticpoolname: ''
  password: ''
  firms : [] #defining array here to expect multiple values. 
  resourcegroupname: ''


steps:
- ${{ each firm in parameters.firms }}:
- task: SqlAzureDacpacDeployment@1
  displayName: Execute Azure SQL
  inputs:
    AuthenticationType: 'server'
    ServerName: 'opsadmin.database.windows.net'
    DatabaseName: ${{ firm }} 
    SqlUsername: 'opsadmin'
    SqlPassword: ${{ parameters.password }}
    DacpacFile: './CommandCenter.dacpac'